image: node:0.12

stages:
- before_install
- install
- test

before_install:
  stage: before_install
  script:
    - npm config set spin false
    - export PATH=$HOME/bin:/usr/local/bin:/usr/bin:/bin
  
install:
  stage: install
  script:
    - npm install -g bower
    - npm install -g ember-cli
    - npm install -g phantomjs-prebuilt
    - npm install
    - bower install --allow-root
  
test:
  stage: test
  script:
    - ember test


